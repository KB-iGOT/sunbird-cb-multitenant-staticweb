<div *ngIf="loading" class="flex justify-center items-center min-h-screen">
  <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
</div>

<div *ngIf="!loading && tenant" class="min-h-screen overflow-hidden">
  <!-- Header/Navigation -->
  <header class="bg-white shadow-sm container-balanced">
    <div class=" mx-auto">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center">
          <!-- <img [src]="tenant.branding.logo" [alt]="tenant.branding.companyName + ' Logo'" class="h-12 w-auto mr-4" />
          <h1 class="text-xl font-bold text-gray-800">{{ tenant.branding.companyName }}</h1> -->
          <img src="/assets/images/IIIDEM-logo.png" [alt]="tenant.branding.companyName + ' Logo'"
            class="h-12 w-auto mr-4" />
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section with Blue Gradient -->
  <section class="relative blue-gradient text-white pt-5 pb-40">
    <div class="disc1 absolute top-0 left-0">
      <img src="/assets/images/oval-disc1.svg" alt="Decorative Disc 1" class="w-40 h-40" />
    </div>
    <div class="disc2 absolute top-0 left-0">
      <img src="/assets/images/oval-disc2.svg" alt="Decorative Disc 1" class="w-80 h-80" />
    </div>
    <div class="navs flex justify-end items-center px-4 pb-6 gap-8">
      <nav class=" space-x-8 flex">
        <ng-container *ngFor="let nav of tenant.navigation">
          <ng-container *ngIf="nav.label !== 'Language'"> 
            <a  href="#"
              class="mat-body-2 nav-link flex items-center cursor-pointer hover:opacity-80 transition-colors">
              <mat-icon class="mr-2 mat-icon" *ngIf="nav.icon">{{ nav.icon }}</mat-icon>
              {{ nav.label
              }}
            </a>
          </ng-container>
          <ng-container *ngIf="nav.label === 'Language'">
            <div class="language flex items-center justify-center nav-link">
              <img src="./assets/images/translate.svg" alt="language-icon" class="mr-2 img-icon">
              <select name="language" class="custom-select" [(ngModel)]="currentLanguage" (change)="languageChange($event)">
                <option [value]="item.key" *ngFor="let item of languages">{{item.value}}</option>
              </select>
            </div>
          </ng-container>
        </ng-container>

      </nav>
      <a class="mat-button login-button h-10" [href]="baseURl + tenant.content.loginButton?.link">
        {{ tenant.content.loginButton?.text }}
      </a>
    </div>
    <div class="container-balanced mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <div>
          <h1 class="text-4xl lg:text-5xl font-bold mb-6 leading-tight">
            {{ tenant.content.title }}
          </h1>
          <p class="mat-body-2 mb-8 text-blue-100 opacity-80">
            {{ tenant.content.subtitle }}
          </p>
        </div>

        <div class="relative">
          <!-- <img [src]="tenant.content.heroImage" [alt]="tenant.content.title" class="w-full rounded-lg shadow-2xl" /> -->
          <div class="slider slider-box" *ngIf="tenant.content.sliderData && tenant.content.sliderData.sliders">
            <sb-uic-sliders [widgetData]="tenant.content.sliderData.sliders"
              [styleData]="tenant.content.sliderData.styleData"></sb-uic-sliders>
          </div>
        </div>
      </div>
      <!-- Statistics -->
      <div class="flex justify-center items-center mt-12">
        <div *ngFor="let stat of tenant.content.statistics; let i = index"
          class="text-left stat-counter pl-4 mr-5 md:mr-15 lg:mr-15"
          [ngClass]="{'border-l-2 border-white border-opacity-30': i > 0}">
          <div class="text-3xl lg:text-4xl font-bold mb-2">{{ stat.value }}</div>
          <div class="text-blue-200 leading-tight maxw-percent text-sm md:text-base">{{ stat.label }}</div>
        </div>
      </div>
    </div>

    <!-- Wave Shape -->
    <div class="absolute bottom-minum5 left-0 right-0">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-full h-auto" viewBox="0 0 1600 224" fill="none">
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M0 85.0547C0 85.0547 228.2 199.895 384.1 190.602C540 181.309 633.391 143.004 804.696 162.156C976 181.309 1472.86 132.989 1612.8 0V223.758H0V85.0547Z"
          fill="#FDFDFF" />
      </svg>
    </div>
  </section>

  <!-- Photo Gallery Section -->
  <section class="py-16 bg-white" *ngIf="tenant.content.photoGallery">
    <div class="container-balanced mx-auto ">
      <div class="grid grid-cols-12 gap-8">
        <div class="col-span-10 col-start-2 md:col-span-4 md:col-start-1">
          <div class="mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-4 flex items-center tricolr-border whitespace-pre"
              [innerHTML]="tenant.content.photoGallery.title">
            </h2>
            <p class="mat-body-2 text-gray-600 max-w-3xl">{{ tenant.content.photoGallery.description }}</p>
            <a [href]="tenant.content.photoGallery.ctaLink" target="_blank"
                class="custom-program-btn gallery-btn flex items-center mt-4">
                <span class="mat-body-2">{{ tenant.content.photoGallery.ctaText }}</span>
                <mat-icon class="ml-3 mat-icon icon">{{ tenant.content.photoGallery.ctaIcon }}</mat-icon>
              </a>
          </div>
        </div>
        <!-- Gallery visible on screens >= 1200px -->
        <div class="gallery col-span-8 mx-auto px-4 sm:px-6 lg:px-8 hidden xl:block">
          <div class="base relative"
            *ngIf="tenant.content.photoGallery.images && tenant.content.photoGallery.images.length >= 6">
            <img *ngIf="tenant.content.photoGallery.images[0]" [src]="tenant.content.photoGallery.images[0].url"
              [alt]="tenant.content.photoGallery.images[0].alt" class="base object-cover rounded-lg shadow-md" />
            <div class="pic1 absolute" *ngIf="tenant.content.photoGallery.images[5]">
              <img [src]="tenant.content.photoGallery.images[5].url" [alt]="tenant.content.photoGallery.images[5].alt"
                class=" object-cover rounded-lg shadow-md" />
            </div>
            <div class="pic-svg absolute">
              <!-- SVG remains unchanged -->
              <img src="/assets/images/gallery-dots.svg" alt="Dotted pattern SVG" class="w-full h-full" />
            </div>
            <div class="pic2 absolute" *ngIf="tenant.content.photoGallery.images[2]">
              <img [src]="tenant.content.photoGallery.images[2].url" [alt]="tenant.content.photoGallery.images[2].alt"
                class=" object-cover rounded-lg shadow-md" />
            </div>
            <div class="pic3 absolute" *ngIf="tenant.content.photoGallery.images[3]">
              <img [src]="tenant.content.photoGallery.images[3].url" [alt]="tenant.content.photoGallery.images[3].alt"
                class=" object-cover rounded-lg shadow-md" />
            </div>
            <div class="pic4 absolute" *ngIf="tenant.content.photoGallery.images[3]">
              <img [src]="tenant.content.photoGallery.images[4].url" [alt]="tenant.content.photoGallery.images[4].alt"
                class=" object-cover rounded-lg shadow-md" />
            </div>
            <div class="pic-circle absolute">

            </div>
          </div>
        </div>
        <!-- Gallery responsive visible on screens < 1200px -->
        <div class="gallery-resonsive col-span-10 col-start-2 xl:hidden md:col-span-8">
          <div class="grid grid-cols-12 gap-3 auto-rows-min"
            *ngIf="tenant.content.photoGallery.images && tenant.content.photoGallery.images.length >= 6">
            <!-- Large image top left -->
            <div class="col-span-6 row-span-2 relative group hover-lift">
              <img [src]="tenant.content.photoGallery.images[0].url" [alt]="tenant.content.photoGallery.images[0].alt"
                class="w-full h-64 object-cover rounded-lg shadow-md" />
              <div
                class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                <p class="text-white text-sm text-center p-2">{{ tenant.content.photoGallery.images[0].caption }}</p>
              </div>
            </div>

            <!-- Top right images -->
            <div class="col-span-3 relative group hover-lift">
              <img [src]="tenant.content.photoGallery.images[1].url" [alt]="tenant.content.photoGallery.images[1].alt"
                class="w-full h-32 object-cover rounded-lg shadow-md" />
              <div
                class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                <p class="text-white text-sm text-center p-2">{{ tenant.content.photoGallery.images[1].caption }}</p>
              </div>
            </div>

            <div class="col-span-3 relative group hover-lift">
              <img [src]="tenant.content.photoGallery.images[2].url" [alt]="tenant.content.photoGallery.images[2].alt"
                class="w-full h-32 object-cover rounded-lg shadow-md" />
              <div
                class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                <p class="text-white text-sm text-center p-2">{{ tenant.content.photoGallery.images[2].caption }}</p>
              </div>
            </div>

            <!-- Bottom right images -->
            <div class="col-span-3 relative group hover-lift">
              <img [src]="tenant.content.photoGallery.images[3].url" [alt]="tenant.content.photoGallery.images[3].alt"
                class="w-full h-28 object-cover rounded-lg shadow-md" />
              <div
                class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                <p class="text-white text-sm text-center p-2">{{ tenant.content.photoGallery.images[3].caption }}</p>
              </div>
            </div>

            <div class="col-span-3 relative group hover-lift">
              <img [src]="tenant.content.photoGallery.images[4].url" [alt]="tenant.content.photoGallery.images[4].alt"
                class="w-full h-28 object-cover rounded-lg shadow-md" />
              <div
                class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                <p class="text-white text-sm text-center p-2">{{ tenant.content.photoGallery.images[4].caption }}</p>
              </div>
            </div>

            <!-- Bottom center image -->
            <div class="col-span-6 col-start-4 relative group hover-lift">
              <img [src]="tenant.content.photoGallery.images[5].url" [alt]="tenant.content.photoGallery.images[5].alt"
                class="w-full h-32 object-cover rounded-lg shadow-md" />
              <div
                class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                <p class="text-white text-sm text-center p-2">{{ tenant.content.photoGallery.images[5].caption }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="black-gradient-bg">
    <!-- Training Programs Section -->
    <section class="relative py-16 training-programs-section" *ngIf="tenant.content.trainingPrograms">
      <div class="absolute top-0 left-0 right-0">
        <svg xmlns="http://www.w3.org/2000/svg" width="1600" height="72" viewBox="0 0 1600 72" fill="none">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M-0.0938805 9.55236C-0.0938805 9.55236 249.67 33.9201 378.601 29.7663C507.532 25.6126 539.642 24.437 608.461 29.7663C677.281 35.0957 1005.84 75.7437 1158.71 70.8153C1311.57 65.8869 1561.45 36.8349 1620 61.2117V0H-1L-0.0938805 9.55236Z"
            fill="#FDFDFF" />
        </svg>
      </div>
      <div class="container-balanced mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-left mb-12">
          <h2 class="text-3xl text-white font-bold mb-4 section-title-white tricolr-border whitespace-pre"
            [innerHTML]="tenant.content.trainingPrograms.title"></h2>
          <p class="section-subtitle-light mat-body-2" style="color: #cbd5e1; max-width: 600px;">{{
            tenant.content.trainingPrograms.subtitle }}</p>
        </div>

        <div class="grid md:grid-cols-3 gap-8">
          <div *ngFor="let program of tenant.content.trainingPrograms.programs"
            class="program-card program-card p-5 flex gap-3">
            <div class="text-4xl mb-4">
              <img [src]="program.icon" [alt]="program.title + ' Icon'" class="mt-4 program-card-img" />
            </div>
            <div class="flex flex-col">
              <h3 class="text-xl text-white font-semibold mb-3">{{ program.title }}</h3>
              <p class="mb-6 mat-body-1 text-white text-opacity-60 flex-1">{{ program.description }}</p>
              <ul class="text-sm" *ngIf="program.features && program.features.length > 0">
                <li *ngFor="let feature of program.features" class="mb-1">â€¢ {{ feature }}</li>
              </ul>
              <a [href]="program.ctaLink" target="_blank"
                class="custom-program-btn training flex items-center mt-4">
                <span class="mat-body-2">{{ program.ctaText }}</span>
                <mat-icon class="ml-3 mat-icon icon">{{ program.ctaIcon }}</mat-icon>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="mx-auto divider-small"></div>
    <!-- International Training Section -->
    <section class="py-16 international-training-section" *ngIf="tenant.content.internationalTraining">
      <div class="container-balanced mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl text-white font-bold text-left mb-12 section-title-white tricolr-border whitespace-pre"
          [innerHTML]="tenant.content.internationalTraining.title"></h2>

        <div class="grid lg:grid-cols-2 gap-12 items-center">
          <div>
            <ul class="space-y-6 p-0">
              <li *ngFor="let country of tenant.content.internationalTraining.countries" class="block">
                <div class="flex items-center mb-2">
                  <mat-icon class="mr-2" [ngStyle]="{ color: country.color }">layers</mat-icon>
                  <span class="font-medium text-white mr-2">{{ country.name }}</span>
                  <span class="text-white">({{ country.count }})</span>
                </div>
                <!-- Progress bar -->
                <div class="w-ful rounded-full h-2 ml-7">
                  <div class="h-2 rounded-full transition-all duration-500" [style.background-color]="country.color"
                    [style.width.%]="getCountryPercentage(country.count)"></div>
                </div>
              </li>
            </ul>
          </div>

          <div class="relative">
            <img [src]="tenant.content.internationalTraining.mapImage" alt="World Map" class="w-full" />
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Partners Section -->
  <section class="py-16 bg-white" *ngIf="tenant.content.partners">
    <div class="container-balanced mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-left text-gray-800 mb-12 
      tricolr-border  lg:whitespace-pre">
        <!-- <img src="/assets/images/tricolor-border.svg" alt="Tricolor Border" class="inline-block align-middle mr-2" /> -->
        {{ tenant.content.partners.title }}
      </h2>
    </div>
    <div class="divider-thin w-full mb-8"></div>
    <!-- <div class="grid grid-cols-2 md:grid-cols-6 gap-8 items-center">
      <div *ngFor="let partner of tenant.content.partners.logos" class="text-center">
        <img [src]="partner.logo" [alt]="partner.name"
          class="h-16 mx-auto grayscale hover:grayscale-0 transition-all" />
      </div>
    </div> -->
    <div class="partner-carousel-container">
      <div class="provider" #carouselTrack>
        <div class="image-wrapper" *ngFor="let partner of tenant.content.partners.logos">
          <img [src]="partner.logo" [alt]="partner.name" class="img-fluid" />
        </div>
        <!-- Clone the same items for seamless loop -->
        <div class="image-wrapper" *ngFor="let partner of tenant.content.partners.logos">
          <img [src]="partner.logo" [alt]="partner.name" class="img-fluid" />
        </div>
      </div>
    </div>
    <div class="divider-thin w-full mt-8"></div>

  </section>

  <!-- Showcased Courses Section -->
  <section class="pb-16 pt-0 bg-white" *ngIf="tenant.content.showcasedCourses">
    <div class="container-balanced mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-left text-gray-800 mb-12 tricolr-border whitespace-pre"
        [innerHTML]="tenant.content.showcasedCourses.title">
      </h2>

      <div class="w-full">
        <!-- <div *ngFor="let course of tenant.content.showcasedCourses.courses"
          class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow hover-lift">
          <img [src]="course.image" [alt]="course.title" class="w-full h-48 object-cover rounded-t-lg" />
          <div class="p-6">
            <h3 class="font-semibold text-gray-800 mb-2">{{ course.title }}</h3>
            <p class="text-sm text-gray-600">{{ course.description }}</p>
          </div>
        </div> -->
          <sb-uic-content-strip-with-tabs
                    [widgetData]="tenant.content.showcasedCourses.stripWidgetData"
                    >
          </sb-uic-content-strip-with-tabs>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-12">
    <div class="container-balanced mx-auto ">
      <!-- <div class="grid md:grid-cols-4 gap-8">
        <div class="md:col-span-2">
          <div class="flex items-center mb-4">
            <img [src]="tenant.branding.logo" [alt]="tenant.branding.companyName + ' Logo'" class="h-12 w-auto mr-4" />
            <h3 class="text-xl font-bold">{{ tenant.branding.companyName }}</h3>
          </div>
          <p class="text-gray-400 mb-4">{{ tenant.content.description }}</p>
        </div>

        <div>
          <h4 class="font-semibold mb-4">Contact Info</h4>
          <div class="space-y-2 text-gray-400">
            <p>{{ tenant.contact.phone }}</p>
            <p>{{ tenant.contact.email }}</p>
            <p>{{ tenant.contact.address }}</p>
          </div>
        </div>

        <div>
          <h4 class="font-semibold mb-4">Quick Links</h4>
          <div class="space-y-2">
            <a *ngFor="let nav of tenant.navigation" href="#"
              class="block text-gray-400 hover:text-white transition-colors">{{ nav.label }}</a>
          </div>
        </div>
      </div> -->

      <div class="border-t border-gray-700 mt-8 text-center text-gray-400">
        <p>&copy; 2024 {{ tenant.branding.companyName }}. All rights reserved.</p>
      </div>
    </div>
  </footer>
</div>

<div *ngIf="!loading && !tenant" class="flex justify-center items-center min-h-screen">
  <div class="text-center">
    <h1 class="text-2xl font-bold text-red-600 mb-4">Tenant Configuration Not Found</h1>
    <p class="text-gray-600">Please check the URL and try again.</p>
  </div>
</div>

<router-outlet></router-outlet>